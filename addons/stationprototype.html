<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Page prototype de station - MobiFer</title>
	<link rel="stylesheet" href="/stationstyles.css">
	
	<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

	<link rel="icon" href="/assets/favicon.png" type="image/x-icon">
</head>
<body>
	<a href="/" class="header"><h1>MobiFer</h1></a>
    
    <textarea rows="30" cols="60" id="code" placeholder="Saisissez un code JSON valide de station." style="width: 100%; max-width: 100%; height: 200px; font-family: monospace; margin-top: 20px;"></textarea>
	<div id="station-content"></div>

	<div id="footer-container" style="padding-top: 10px;"></div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
	<script src="/assets/script/stationprototype.js" type="module"></script>
	<script>
		function switchToPANAM() {
			document.querySelectorAll("iframe.ratp").forEach(iframe => {
				iframe.src = iframe.src.replace("?style=siel", "?style=panam");
				iframe.classList.remove("piq");
				iframe.classList.add("panam");
			});
		}

		function switchToPIQ() {
			document.querySelectorAll("iframe.ratp").forEach(iframe => {
				iframe.src = iframe.src.replace("?style=panam", "?style=siel").replace("&rivoli=true", "&rivoli=false");
				iframe.classList.remove("panam");
				iframe.classList.add("piq");
			});
		}

		function switchToPIQDark() {
			document.querySelectorAll("iframe.ratp").forEach(iframe => {
				iframe.src = iframe.src.replace("?style=panam", "?style=siel").replace("&rivoli=false", "&rivoli=true");
				iframe.classList.remove("panam");
				iframe.classList.add("piq");
			});
		}
		
		function detecterStyleInitial() {
			document.querySelectorAll("iframe.ratp").forEach(iframe => {
				if (iframe.src.includes('style=panam')) {
					iframe.classList.add("panam");
				} else {
					iframe.classList.add("piq");
				}
			});
		}
		setTimeout(detecterStyleInitial, 1000);
	</script>
	<script src="/addons/footer.js"></script>
</body>
</html>
